{% load static %}

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    {% block css_link %}{% endblock %} 

    <link rel="stylesheet" href="{% static 'base.css' %}">
    <link rel="stylesheet" href="{% static 'css/datatables/datatables.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/datatables/datatables.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>

    <title>{% block title %}title{% endblock %}</title>

    <style>
      body {
          width: 100vw;
          margin: 0;
          font-family: Arial, sans-serif;
          display: flex;
          background-color: #f9f9f9;
      }

      /* Top Navbar Styles */
      .navbar {
          background-color: #2c2f33;
          padding: 10px 20px;
          position: fixed;
          top: 0;
          width: 100%;
          z-index: 1000;
          display: flex;
          justify-content: space-between;
          align-items: center;
      }

      /* Sidebar Styles */
      .sidebar {
          margin-top: 70px; /* Adjust based on the height of your navbar */
          width: 200px;
          position: fixed;
          left: 0;
          top: 0;
          background-color: #23272a;
          height: 100%;
          padding-top: 60px; /* Adjust padding to account for the fixed navbar */
          z-index: 999;
      }

      .navbar-nav {
          flex-direction: column;
          margin-left: 20px;
      }

      .navbar-nav .nav-link {
          display: block;
          padding: 15px 25px;
          color: white;
          text-decoration: none;
          transition: background-color 0.3s ease;
      }

      .navbar-nav .nav-link:hover {
          background-color: #575757;
      }

      .navbar-nav .dropdown-menu {
          background-color: #2c2f33;
      }

      /* Profile Button */
      .profile1 {
          background-color: #7289da;
          border-radius: 5px;
          padding: 8px 16px;
          color: white;
          font-weight: bold;
          transition: background-color 0.3s ease;
      }

      .profile1:hover {
          background-color: #5b6eae;
      }

      /* Search Bar */
      .search-bar {
          padding: 5px 10px;
          border-radius: 20px;
          border: 1px solid #ccc;
          outline: none;
          width: 300px;
      }

      .content {
          margin-left: 200px; /* Pushes the content to the right by the width of the sidebar */
          padding: 20px;
          flex-grow: 1;
      }

      /* Timer Styling */
      .timer {
          color: white;
          font-size: 18px;
      }
    </style>
  </head>

  <body>
    <!-- Top Navbar -->
    <nav class="navbar navbar-expand-lg">
      <div class="navbar-brand-container">
          <!-- Logo -->
          <a href="{% url 'index' %}">
              <img class="navbar-brand" src="{% static 'Logo.png' %}" alt="Brand Image" style="height: 65px;">
          </a>
      </div>
  
      <!-- Timer -->
      <div>
          {% if timer %}
          <div class="timer" id="count_down"></div>
          {% endif %}
      </div>
  
      <!-- Profile Button -->
      <div>
          <a class="btn btn-dark profile1" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample">
              <b>Profile</b>
          </a>
      </div>
  
      <!-- Search Bar -->
      <div class="navbar-center">
          <input type="text" class="search-bar" placeholder="Search...">
      </div>
    </nav>

    <!-- Sidebar -->
    <nav class="sidebar">
      <div class="sidebar-brand-container">
        <a href="{% url 'index' %}">
          <img class="sidebar-brand" src="{% static 'Logo.png' %}" alt="Brand Image" style="height: 65px;">
        </a>
      </div>

      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav flex-column dropdown-menu-right">
          <!-- Sidebar Links -->
          <li class="nav-item dropdown">
             <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Mining
             </a>
             <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'mining' %}">Create Mining</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="{% url 'data' %}">View Mining</a></li>
             </ul>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Contacts
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{% url 'create_contact' %}">Create Contacts</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="#">View Contacts</a></li>
            </ul>
          </li>

          <!-- Add more sidebar items as needed -->
        </ul>
      </div>
    </nav>

    <!-- Main Content Area -->
    <div class="content">
      {% block content %}{% endblock %}
    </div>

    <!-- Profile Offcanvas -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasExampleLabel"><b>Profile</b></h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <div class="row p-2">
          <a href="{% url 'detail_profile' %}" class="right_profile">View Profile</a>
        </div>
        <div class="row p-2">
          <a href="#" class="right_profile">Edit Profile</a>
        </div>
        <hr>
        <div class="row p-2">
          <a href="#" class="right_profile">Employees</a>
        </div>
        <div class="row p-2">
          <a href="#" class="right_profile">Community Forum</a>
        </div>
        <div class="row p-2">
          <a href="#" class="right_profile">About</a>
        </div>
        <hr>
        <div class="row p-2">
          <a href="{% url 'logout' %}" class="right_profile">Logout</a>
        </div>
      </div>
    </div>

    <!-- Timer Script -->
    <script>
      let totalSeconds = parseInt("{{ timer.hrs }}", 10) * 3600 + 
                         parseInt("{{ timer.min }}", 10) * 60 + 
                         parseInt("{{ timer.sec }}", 10);

      const countDownEle = document.getElementById("count_down");

      function convertSecondsToHms(seconds) {
          const hours = Math.floor(seconds / 3600);
          const minutes = Math.floor((seconds % 3600) / 60);
          const sec = Math.floor(seconds % 60);

          const formattedHours = hours.toString().padStart(2, "0");
          const formattedMinutes = minutes.toString().padStart(2, "0");
          const formattedSeconds = sec.toString().padStart(2, "0");

          return `${formattedHours}:${formattedMinutes}:${formattedSeconds}`;
      }

      function updateCountDown() {
          if (totalSeconds <= 0) {
              countDownEle.innerHTML = "00:00:00";
              clearInterval(timerInterval);
              return;
          }
          
          let formattedTimer = convertSecondsToHms(totalSeconds);
          countDownEle.innerHTML = formattedTimer;
          totalSeconds++; // Increment the seconds.
      }

      const timerInterval = setInterval(updateCountDown, 1000);
    </script>


    {% block javascript %}{% endblock %}


<!-- Include necessary external scripts -->
<script src="{% static 'js/bootstrap.bundle.js' %}"></script>
<script src="{% static 'js/datatables/datatables.js' %}"></script>
<script src="{% static 'js/datatables/datatables.min.js' %}"></script>

  </body>
</html>



